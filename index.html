<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

	<title>wideopenspaces/wicked @ GitHub</title>
	
	<style type="text/css">
		body {
  		margin-top: 1.0em;
  		background-color: #f1bc27;
		  font-family: "helvetica"; 
  		color: #000000;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
		h1 { font-size: 3.8em; color: #0e43d8; margin-bottom: 3px; }
		h1 .small { font-size: 0.4em; }
		h1 a { text-decoration: none }
		h2 { font-size: 1.5em; color: #0e43d8; }
    h3 { text-align: center; color: #0e43d8; }
    a { color: #0e43d8; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
		pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
	</style>
	
</head>

<body>
  <a href="http://github.com/wideopenspaces/wicked"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
  
  <div id="container">

    <div class="download">
      <a href="http://github.com/wideopenspaces/wicked/zipball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/zip.png"></a>
      <a href="http://github.com/wideopenspaces/wicked/tarball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/tar.png"></a>
    </div>
      
    <h1><a href="http://github.com/wideopenspaces/wicked">wicked</a> 
      <span class="small">by <a href="http://github.com/wideopenspaces">wideopenspaces</a></small></h1>

    <div class="description">
      Wicked Good extensions to Object in the vein of #andand
    </div>
    
<h2>A few common patterns</h2>

<h3>[A] exists and has quality [B]?</h3>
  
<p>In Ruby, the && operator joins two true clauses, equivalent to asking "are A <strong>and</strong> B both true?" One of the
  more common uses for && is checking to see if an object exists before asking it for an attribute.</p>

<pre>  if a && a.b
    "hi"
  end
  </pre>

<p>If we didn't check for 'a' before checking a.b, we could be asking the wrong guy about b...
  as in "'Hey, Mr. Nothin' - you know anything about this 'b' thing?"</p>
  
<p>Let's just say Nil (Mr. Nothing) usually throws a fit when you ask him that sort of question. But if we check for 'a' AND 'a.b' and
   'a' doesn't exist, Ruby doesn't evaluate the second half of the expression. Nil gets left alone. (<em>to be fair, most Ruby objects
     shout pretty loud when you ask them about a method they don't have. Some get creative and come up with things on the fly, though!</em>)</p>
     
<p>In Rails applications, you'll commonly see:</p>

<pre>  if (user = User.find(params[:id])) && phone = user.phone_number
    puts phone
  end</pre>

<p>Which boils down to <em>"if 'user' exists, then get me attribute 'phone_number' of 'user' as 'phone'"</em></p>

<p>And <strong>that's</strong> the pattern 'andand' was created to simplify. To keep Nil and friends quiet and make the
  pattern more elegant.</p>
  
<pre>  if phone = user.andand.phone_number
    puts phone
  end</pre>
  
<h3>Logical Sugar for #andand</h3>

<h4>Object#et</h4>

<p> #et is an alias for #andand for brevity. "Et" is Latin for 'and'. This works the same as 'andand', but is much shorter! ;)</p> 
<pre>  if phone = user.et.phone_number
    puts phone
  end</pre>

  <h4>Object#ask</h4>

  <p>#ask is another alias for #andand. I like it the most because it describes what the pattern actually does:
    we ask "user, are you there, and what's your phone number?" Since we're asking nicely and not demanding
    an answer, our objects won't throw a fit.</p>

<pre>    if phone = user.ask.phone_number
      puts phone
    end</pre>

<h4>Object#is</h4>

<p>Yet another alias, this one providing the positive equivalent of 'aint', syntactically useful for 
  places where you'd use 'andand' when checking that a boolean attribute is true.</p>

<pre>  user.destroy if user.is.revoked?</pre>    

<p>works the same as</p>

<pre>  user.destroy if user && user.revoked?</pre>
<p>&nbsp;</p>

<h3>[A] exists and does NOT have quality [B]?</h3>

<pre>  if user && !user.cancelled?</pre>

<p>Here we're checking if our user exists before checking to make sure that they haven't cancelled their account.
  Effectively, we want user to exist and cancelled to be false, which is why we have that (!) before the second 'user'.</p>
  
<p>Using #andand in this case won't work, because the 2nd half will evaluate to false, and stop our friendly 'if' block.</p>

<p>So what do we do? How would we say it in English? "if it ain't broke, don't fix it", right?<p>
  
<p>Why not do that in Ruby?</p>
<h3>Never say ain't</h3>

<h4>Object#aint</h4>

<pre>   puts "Don't fix it!" if it.aint.broken?</pre>
   
<p>works the same as</p>
  
<pre>   if it && !it.broken?
    puts "Don't fix it"
   end</pre>

<p>For those who aint from the northeast and say 'ant' when they mean their 
'aunt', Object#aint is also aliased as:</p>

<pre>   #is_not
   #isnt
   #andnot</pre>

   <p><strong>NOTE</strong>: be wary of using 'unless' with Object#is or Object#aint -- if
   the method doesn't exist on the receiver (it does not respond to revoked?),
   both #is and #aint return nil, which can be wicked bad if you don't 
   grok your logic.</p>   
   
<p><strong>ONE MORE NOTE</strong>: #is and #aint are intended for safely checking boolean methods. 
Other uses are expressly not covered under any warranty ;)</p>
<h2>Dependencies</h2>
<p>andand >= 1.3.1</p>
<h2>Install</h2>
<p><pre>   sudo gem install wideopenspaces-wicked</pre></p>
<p>If using in Rails 2.2+, add the following line to config/environment.rb:</p>
<p><pre>  config.gem "wideopenspaces-wicked", :lib => 'wicked'</pre></p>
<h2>License</h2>
<p>MIT</p>
<h2>Authors</h2>
<p>Jacob Stetser (jake@wideopenspac.es)
<br/>
<br/>      </p>
<h2>Contact</h2>
<p>Jacob Stetser (jake@wideopenspac.es)
<br/>      </p>


    <h2>Download</h2>
    <p>
      You can download this project in either
      <a href="http://github.com/wideopenspaces/wicked/zipball/master">zip</a> or
      <a href="http://github.com/wideopenspaces/wicked/tarball/master">tar</a> formats.
    </p>
    <p>You can also clone the project with <a href="http://git-scm.com">Git</a>
      by running:
      <pre>$ git clone git://github.com/wideopenspaces/wicked</pre>
    </p>
      
    <div class="footer">
      get the source code on GitHub : <a href="http://github.com/wideopenspaces/wicked">wideopenspaces/wicked</a>
    </div>
    
  </div>

  
</body>
</html>
